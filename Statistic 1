import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import scipy.stats as sts
import statistics
from sklearn import preprocessing
import seaborn as sns

url="http://yustiks.ru/dataset/world-happiness-report-2019.csv"
df=pd.read_csv(url)

df.head(15)
df1 = df.filter(items = ['Positive affect', 'Freedom'])
df1.plot()

'''
Распределение не является нормальным.
'''

freedom = df.Freedom.dropna() # Удалить н\а значения
print(statistics.median(df.Freedom)) # Медиана
print(df.Freedom.isnull().sum()) # Количество выбросов
print(statistics.pvariance(freedom)) # Дисперсия
print(statistics.pstdev(freedom)) # Стандартное отклонение
print(statistics.mean(freedom)) # Среднее \ математическое ожидание
print(max(freedom))
print(min(freedom))
print(max(freedom)-min(freedom)) # Размах
print(statistics.mode(freedom)) # Мода

'''
statistics.mode(freedom) выдает ошибку.
Помогите пожалуйста разобраться.
'''

postive_affect = df['Positive affect'].dropna()
plt.scatter(df['Positive affect'], df['Freedom'], color = 'r')
corr, p_value = sts.pearsonr(postive_affect, freedom) # Корреляция Пирсона = corr
print(corr) # Зависимость сильно выражена как по коэффициенту, так и на графике

freedom_norm = freedom - statistics.mean(freedom)

norm = preprocessing.MinMaxScaler(feature_range=(-1,1))

freedom_norm_and_centre = norm.fit_transform(np.array(freedom_norm).reshape(-1, 1))
print(min(freedom_norm_and_centre)) # Нормализация и масштабирование данных
print(max(freedom_norm_and_centre))

sns.heatmap(df.corr(),annot=True,cmap='RdYlGn',linewidths=0.2)
fig=plt.gcf()
fig.set_size_inches(12,12) # Матрица корреляции
plt.show()

url="http://yustiks.ru/avocado.csv"
avocado = pd.read_csv(url)

plt.hist(avocado['AveragePrice']) # Нормальное распределние

plt.scatter(avocado['AveragePrice'], avocado['4046'], color = 'y')
corr, p_value = sts.pearsonr(avocado['AveragePrice'], avocado['4046'])
print(corr) # Зависимости у данных нет т.к. коэффициент Пирсона ближе к нулю. 
# Тоже можно увиждеть и на графике

